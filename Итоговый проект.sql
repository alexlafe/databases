--Таблица с информацией о книгах
CREATE TABLE IF NOT EXISTS `Книги` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `Название` varchar(45) DEFAULT NULL,
  `Автор` varchar(45) DEFAULT NULL,
  `Жанр_id` int(10) UNSIGNED NOT NULL,
  `год`  date DEFAULT NULL,
  `Издательство_id` int(10) UNSIGNED NOT NULL,
  `Покупатель_id` int(10) UNSIGNED NOT NULL,
  `Формат_id` int(10) UNSIGNED NOT NULL,
  `Размер_id` int(10) UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  foreign key (`Жанр_id`) references `Жанр` (`id`) on update cascade,
  foreign key (`Издательство_id`) references `Издательства` (`id`) on update cascade,
  foreign key (`Покупатель_id`) references `Покупатели` (`id`) on update cascade,
  foreign key (`Формат_id`) references `Формат` (`id`) on update cascade,
  foreign key (`Размер_id`) references `Размер` (`id`) on update cascade
);

INSERT INTO `Книги` (`id`, `Название`, `Автор`, `Жанр_id`, `Год`, `Издательство_id`, `Покупатель_id`, `Формат_id`, `Размер_id`) VALUES
(1, 'Война и мир', 'Лев Толстой', '1', '1865-09-19', '1', '1', '5','3'),
(2, '1984', 'Джордж Оруэлл', '2', '1949-09-19', '3', '2', '3','2'),
(3, 'Фиеста', 'Эрнест Хемингуэй', '3', '1953-09-19', '3', '3', '3', '2'),
(4, 'Человек-невидимка', 'Ральф Эллисон', '4', '1897-09-19', '2', '4', '2', '1'),
(5, 'Божественная комедия', 'Данте Алигьери', '5', '1472-09-19', '4', '5', '2', '1'),
(6, 'Родной сын', 'Ричард Райт', '6', '1940-09-19', '3','5', '3', '2'),
(7, 'О происхождении видов', 'Чарльз Дарвин', '7', '1859-09-19', '5','2', '3', '2'),
(8, 'История', 'Геродот', '8', '1-09-19', '4','1', '4', '2'),
(9, 'Числа', 'Рейчел Уорд', '9', '2012-09-19', '5','2', '5', '3'),
(10, 'Левиафан', 'Томас Гоббс', '10', '1651-09-19', '4','4', '5', '3'),
(11, 'Винни-Пух', 'Алан Милн', '11', '1926-09-19', '2','5', '4', '2'),
(12, 'Лорд Джим', 'Джозеф Конрад', '12', '1900-09-19', '1','2', '3', '2'),
(13, 'Темные начала', 'Филип Пулман', '13', '2004-09-19', '1', '3', '5', '3'),
(14, 'Книга джунглей', 'Редьярд Киплинг', '11', '1894-09-19', '2', '1', '2','1'),
(15, 'Лолита', 'Владимир Набоков', '3', '1953-09-19', '5','2', '3', '2');

--Таблица с информацией о жанрах
CREATE TABLE IF NOT EXISTS `Жанр` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `Название` varchar(45) NOT NULL,
  PRIMARY KEY (`id`));

INSERT INTO `Жанр` (`id`, `Название`) VALUES
(1, 'Классика'),
(2, 'Антиутопия'),
(3, 'Роман'),
(4, 'Фантастика'),
(5, 'Поэма'),
(6, 'Драма'),
(7, 'Биология'),
(8, 'История'),
(9, 'Ужасы'),
(10, 'Детектив'),
(11, 'Сказка'),
(12, 'Приключения'),
(13, 'Фэнтези');

--Таблица с информацией об издательствах
CREATE TABLE IF NOT EXISTS `Издательства` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `Название` varchar(45) NOT NULL,
  PRIMARY KEY (`id`)
  );

INSERT INTO `Издательства` (`id`, `Название`) VALUES
(1, 'Азбука'),
(2, 'Росмэн'),
(3, 'Литрес'),
(4, 'Вече'),
(5, 'Юрайт');

--Таблица с информацией о размерах книги
CREATE TABLE IF NOT EXISTS `Размер` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `Название` varchar(45) NOT NULL,
  `Количество страниц` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`id`));

INSERT INTO `Размер` (`id`, `Название`,`Количество страниц`) VALUES
(1, 'Длинная', 'от 800 стр'),
(2, 'Стандарт','250-800 стр'),
(3, 'Короткая','до 250 стр');


--Таблица с информацией о форматах
CREATE TABLE IF NOT EXISTS `Формат` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `Название` varchar(45) NOT NULL,
  `Формат` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`id`));

INSERT INTO `Формат` (`id`, `Название`,`Формат`) VALUES
(1, 'Сверхкрупная', '(84×108/16; 70×90/8)'),
(2, 'Крупная','(70×90/16; 75×90/16)'),
(3, 'Средняя','(60×90/16; 84×108/32'),
(4, 'Малая','(70×90/32; 70×108/32'),
(5, 'Сверхмалая','(60×90/32)');

--Таблица с информацией о покупателях
CREATE TABLE IF NOT EXISTS `Покупатели` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `Фамилия` varchar(45) NOT NULL,
  `Имя` varchar(45) DEFAULT NULL,
  `Дата рождения` date DEFAULT NULL,
  `Адрес` varchar(45) DEFAULT NULL,
  `Телефон` char(12) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

INSERT INTO `Покупатели` (`id`, `Фамилия`, `Имя`, `Дата рождения`, `Адрес`, `Телефон`) VALUES
(1, 'Морковкина', 'Ирина', '1982-09-19', 'Сталинградская 4- 32', '79848451233'),
(2, 'Днепровский', 'Кирилл', '1986-08-12', 'Ветеравнова 14 -2', '79878755210'),
(3, 'Черных', 'Даниил', '1977-07-03', 'Петрова 8 -21', '79844455555'),
(4, 'Казанская', 'Марина', '1973-03-08', 'Грушевая 11 -23', '79878512125'),
(5, 'Белоусова', 'Татьяна', '1996-02-06', 'Седова 2 -33', '79544545522');

--Таблица с информацией о клиентах поступлениях
CREATE TABLE IF NOT EXISTS `Поступления` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `Издательства_id` int(10) UNSIGNED NOT NULL,
  `Количество` char(12) DEFAULT NULL,
  `Сумма` char(12) DEFAULT NULL,
  PRIMARY KEY (`id`),
  foreign key (`Издательства_id`) references `Издательства` (`id`) on update cascade
  );

INSERT INTO `Поступления` (`id`, `Издательства_id`,`Количество`,`Сумма`) VALUES
(1, '1', '50','28 000'),
(2, '2','50','32 000'),
(3, '3','50','20 000'),
(4, '4','50','28 000'),
(5, '5','50','40 000');


--Таблица с информацией о клиентах о продажах
CREATE TABLE IF NOT EXISTS `Продажи` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `Издательства_id` int(10) UNSIGNED NOT NULL,
  `Продано` varchar(45) DEFAULT NULL,
  `Сумма` char(12) DEFAULT NULL,
  PRIMARY KEY (`id`),
  foreign key (`Издательства_id`) references `Издательства` (`id`) on update cascade
  );

INSERT INTO `Продажи` (`id`,`Издательства_id`, `Продано`,`Сумма`) VALUES
(1, '1', '12','8 000'),
(2, '2','28','19 000'),
(3, '3','48','18 000'),
(4, '4','14','9 000'),
(5, '5','30','26 000');



  --Представление для нахождения жанров книг
  create view genre_books as select id, Жанр_id from Книги where Жанр_id = '3';

  --Представление для нахождения издательств книг
  create view publishing_houses_books as select id, Издательство_id  from Книги where Издательство_id = '1';

  --Представление для нахождения покупателя книг
  create view buyer_books as select id, Покупатель_id from Книги where Покупатель_id = '5';

  --Представление для нахождения формата книг
  create view format_books as select id, Формат_id from Книги where Формат_id = '2';

  --Представление для нахождения размера книг
  create view size_books as select id, Размер_id from Книги where Размер_id = '3';

  --Представление для нахождения количества продажи книг издательства
  create view sales_books as select id, Издательства_id, Продано  from Продажи where Издательства_id = '3';

  --Представление для нахождения количества поступления книг издательства
  create view entrance_books as select id, Издательства_id, Количество  from Поступления where Издательства_id = '1';
